<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Inbound Timeline Viewer</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
        h1 { font-size: 1.5em; color: #444; }
        .group-title { margin-top: 30px; font-size: 1.2em; color: #333; }
        .card { background: #fff; padding: 15px; margin: 10px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .sku { font-weight: bold; color: #0078d4; }
        .desc, .eta, .comm { margin-top: 5px; }
    </style>
</head>
<body>
    <h1>Inbound Product Timeline</h1>
    <div id="container">Loading data...</div>

    <script>
        const jsonUrl = "Inbound_Timeline.json?v=" + new Date().getTime();

        fetch(jsonUrl)
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById("container");
                container.innerHTML = "";

                // Group by 'group' field
                const grouped = {};
                for (const item of data) {
                    if (!grouped[item.group]) grouped[item.group] = [];
                    grouped[item.group].push(item);
                }

                // Render each group
                for (const group in grouped) {
                    const groupTitle = document.createElement("div");
                    groupTitle.className = "group-title";
                    groupTitle.textContent = group;
                    container.appendChild(groupTitle);

                    grouped[group].forEach(item => {
                        const card = document.createElement("div");
                        card.className = "card";
                        card.innerHTML = `
                            <div class="sku">${item.sku}</div>
                            <div class="desc">${item.description}</div>
                            <div class="eta"><strong>ETA:</strong> ${item.eta || "N/A"}</div>
                            <div class="comm"><strong>Communicated:</strong> ${item.communicated_date}</div>
                        `;
                        container.appendChild(card);
                    });
                }
            })
            .catch(err => {
                document.getElementById("container").textContent = "Failed to load data.";
                console.error(err);
            });
    </script>
</body>
</html>
