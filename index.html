<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Inbound Timeline Viewer</title>
  <style>
    body {
    font-family: "Segoe UI", "Arial", sans-serif;
    font-weight: 600; /* semi-bold for base text */
    padding: 20px;
    background: #1e1e1e;
    color: #f0f0f0;
    }

    h1 {
    font-size: 1.5em;
    font-weight: 700; /* bold for header */
    color: #ffffff;
    }

    .accordion {
    background-color: rgb(255, 182, 26);
    color: rgb(0, 43, 73);
    font-weight: 700; /* make button text bold */
    cursor: pointer;
    padding: 14px;
    margin-bottom: 5px;
    width: 100%;
    border: none;
    text-align: left;
    font-size: 1em;
    border-radius: 6px;
    transition: background-color 0.2s ease;
    }

    th, td {
    font-weight: 600;
    padding: 10px;
    text-align: left;
    }

    th {
      background-color: #3a3a3a;
      color: #f0f0f0;
      font-weight: bold;
      border-bottom: 2px solid #555;
    }

    td {
      border-bottom: 1px solid #444;
      color: #e0e0e0;
    }
  </style>
</head>
<body>
  <h1>Inbound Product Timeline</h1>
  <div id="container">Loading data...</div>

  <script>
    const jsonUrl = "Inbound_Timeline.json?v=" + new Date().getTime();
    fetch(jsonUrl)
      .then(response => response.json())
      .then(data => {
        const grouped = {};
        data.forEach(item => {
          if (!grouped[item.group]) grouped[item.group] = [];
          grouped[item.group].push(item);
        });

        const container = document.getElementById("container");
        container.innerHTML = "";

        const groupOrder = ["This Month", "Next Month", "2+ Months Out", "TBA"];
        groupOrder.forEach(groupName => {
          if (!grouped[groupName]) return;

          const btn = document.createElement("button");
          btn.className = "accordion";
          btn.textContent = groupName;
          container.appendChild(btn);

          const panel = document.createElement("div");
          panel.className = "panel";

          const table = document.createElement("table");
          const thead = document.createElement("thead");
          thead.innerHTML = `
            <tr>
              <th>SKU</th>
              <th>Description</th>
              <th>ETA</th>
              <th>Communicated Date</th>
            </tr>
          `;
          table.appendChild(thead);

          const tbody = document.createElement("tbody");
          grouped[groupName].forEach(item => {
            const row = document.createElement("tr");
            row.innerHTML = `
              <td>${item.sku}</td>
              <td>${item.description}</td>
              <td>${item.eta || "-"}</td>
              <td>${item.communicated_date}</td>
            `;
            tbody.appendChild(row);
          });

          table.appendChild(tbody);
          panel.appendChild(table);
          container.appendChild(panel);
        });

        // Accordion behavior
        const acc = document.getElementsByClassName("accordion");
        for (let i = 0; i < acc.length; i++) {
          acc[i].addEventListener("click", function () {
            this.classList.toggle("active");
            const panel = this.nextElementSibling;
            panel.style.display = panel.style.display === "block" ? "none" : "block";
          });
        }
      })
      .catch(err => {
        document.getElementById("container").textContent = "Failed to load data.";
        console.error(err);
      });
  </script>
</body>
</html>
